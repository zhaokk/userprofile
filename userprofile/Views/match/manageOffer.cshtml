@model userprofile.Models.offersViewModels
@{
    ViewBag.Title = "";
    int i = 0;
    int j = 0;
}
<style>
    .hidde {
    display:none;
    
    }

</style>

    <div class="col-sm-12">
        <div class="box" style="background-color:rgba(255, 255, 255,0.7)">
            <div class="box-body" style="height:500px">
                <h2>manageOffer</h2>
                @using (Html.BeginForm())
                {
                    foreach (var item in Model.offers)
                    {

                        if (item.status == "dummy")
                        {
                            <div class="well col-lg-4 col-md-12" id="@i" hidden>
                                <h1>lol</h1>
                                @Html.DropDownList("referees", (List<SelectListItem>)ViewBag.referees, "select one referees", new { @Name = "offer[" + i + "][refID]" })
                                <input type="text" value="@item.offerID" name="offer[@i][ID]" hidden>

                                @{j++;}

                            </div>
                        }
                        else
                        {
                            
                            <div class="well col-lg-4 col-md-12" id="@i">
                                @Html.ActionLink("Delete", "Delete", "offer", new { id = item.offerID }, new { @class = "btn btn-danger pull-right" })
                                <div class="form-group">
                                    <select name="offer[@i][refID]">
                                        @foreach (var selection in ViewBag.referees)
                                        {
                                            if (item.refID.ToString() == selection.Value)
                                            {
                                                <option value="@selection.Value" selected>@selection.Text</option>

                                            }
                                            else
                                            {

                                                <option value="@selection.Value">@selection.Text</option>
                                            }
                                        }
                                    </select>
                                </div>

                                <input type="text" value="@item.offerID" name="offer[@i][ID]" hidden>

                                <div class="form-group">
                                    <div class=" label label-default"> @Html.DisplayFor(modelItem => item.dateOfOffer, new { @id = "date" })</div>
                                    </div>
                                <div class="form-group">
                                    <div class="label label-warning">@Html.DisplayFor(modelItem => item.status)</div>
                                </div>



                                
                            </div>
                        }
                        i++;
                    }

                    if (j == 0) { }
                    else
                    {
                        <div class="" id="addnew">

                            <a href="#" id="addnewoffer" class="btn btn-success" onclick="newOffer()">Add New Offer</a>


                        </div>
                    }
                    @Html.HiddenFor(model => model.mID)
                    <input type="text" id="flag" value="@j" hidden>
                    <div class="form-group">

                        <input onload="check()" type="submit" value="Create" class="btn btn-success pull-left" />

                    </div>
                }

            </div>
        </div>
        </div>
  
                <script>
                    var i = $("#flag").val();

                    function newOffer() {
                        var j = 3 - i;
                        $("#" + j).css("display", "block");

                        i--;
                        if (i < 1) {

                            $("#addnew").css("display", "none");
                        }
                    }


                </script>

